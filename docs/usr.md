### **Спецификация Пользовательских Требований (USR)**
**Продукт:** ClinNexus Platform
**Версия документа:** **1.2**
**Дата:** **15.12.2025**

---

## 1. Введение

### 1.1 Назначение

Настоящий документ определяет пользовательские требования к программной платформе ClinNexus. Платформа предназначена для интеллектуального управления жизненным циклом документации в клинических исследованиях. Цели платформы:

*   повысить эффективность подготовки и обновления документов;
*   обеспечить целостность данных и воспроизводимость выводов;
*   поддержать соответствие регуляторным ожиданиям (GxP) за счет прослеживаемости, контроля качества и управляемого процесса изменений.

Документ описывает **ЧТО** система должна делать (не **КАК** реализовано).

### 1.2 Область применения

**Пользователи/организации:** фармацевтические компании, CRO, биотехнологические компании, вовлеченные в подготовку, проверку и управление клинической документацией.

**В области применения (v1.x):**

*   Протокол исследования (и поправки)
*   Брошюра исследователя (IB)
*   Информированное согласие (ICF)
*   Статистический план анализа (SAP)
*   Таблицы, листинги и рисунки (TFL)
*   Отчет о клиническом исследовании (CSR)

**Исключено из области применения (v1.x):**

*   Прямая интеграция с EDC/CTMS (возможна в будущих версиях)
*   Проведение статистического анализа данных (не входит)
*   Электронное подписание документов (e-sign) (может быть добавлено в будущих версиях)

### 1.3 Пользовательские роли (Personas)

*   **Медицинский райтер (Medical Writer):** создание/обновление документов; важно быстро писать, поддерживать стиль, легко подтверждать утверждения источниками.
*   **ClinOps:** контроль согласованности и актуальности; важно видеть несоответствия, влияние изменений, контроль версий.
*   **QA/RA:** соответствие GxP, аудит; важны audit trail, прослеживаемость, управляемые статусы, контролируемая конфигурация.
*   **Администратор платформы:** управление доступом, шаблонами, правилами, настройками и конфигурацией системы.

---

## 2. Пользовательские требования

### 2.1 Модуль 1: Управление исследованиями и документами (Study & Document Layer)

**USR-101:** Пользователь должен иметь возможность создавать и управлять объектами “Исследование” (Study), включая минимум: уникальный идентификатор исследования, название/краткое описание, статус исследования, список связанных документов.

**USR-102:** Пользователь должен иметь возможность загружать в систему исходные документы в форматах **DOCX** и **PDF** (включая сканированные PDF).

**USR-103:** Система должна автоматически присваивать загруженным документам версии и хранить историю версий (включая метаданные: дата загрузки, автор загрузки, тип документа, привязка к Study, комментарий).

**USR-104:** Пользователь должен иметь возможность просматривать исходные документы в интерфейсе платформы (включая переход по разделам/страницам и поиск по документу).

**USR-105:** Система должна автоматически обрабатывать загруженные документы для создания их “цифрового двойника” (Anchors, Study KB, Narrative Index). При недостаточном качестве извлечения (например, низкая уверенность распознавания) система должна помечать соответствующие элементы как **Needs Review/TBD** и формировать задачи на проверку пользователю.

**USR-106:** Для документов из сканированных PDF система должна отображать индикатор качества распознавания/извлечения (confidence) и явно помечать фрагменты низкой уверенности.

**USR-107:** Пользователь должен иметь возможность назначать документам статусы жизненного цикла, например: **Draft, In Review, Approved, Superseded**, и видеть историю изменений статусов.

**USR-108:** Пользователь должен иметь возможность задавать и просматривать “критичность” документа/версии (например, “Source of Truth / Reference / Supporting”), если эта классификация используется в организации.

---

### 2.2 Модуль 2: Центральная база знаний исследования (Study KB / Fact Store)

**USR-201:** Пользователь должен иметь возможность просматривать структурированные факты (ключевые параметры исследования), извлеченные системой в Study KB, с фильтрацией по типу факта, документу-источнику и версии.

**USR-202:** Для каждого факта в Study KB пользователь должен видеть:
*   значение факта,
*   статус валидации (например: **extracted / validated / conflicting / TBD / needs review**),
*   кликабельные ссылки на исходные фрагменты (Anchors) в документе(ах)-источнике.

**USR-203:** Система должна поддерживать наличие **нескольких источников** для одного факта (например, Protocol и SAP), с отображением списка источников и версий.

**USR-204:** Система должна поддерживать настраиваемые правила приоритета/разрешения конфликтов источников для фактов (например, “Protocol overrides CSR for schedule” или правила по типам документов).
<ins>**USR-204.1 (Добавлено):** Система должна предоставлять интерфейс (для роли Администратора/QA) для просмотра и управления правилами приоритетов источников. Все изменения в этих правилах должны быть версионируемыми и записываться в audit trail.</ins>

**USR-205:** Администратор должен иметь возможность управлять схемой данных (типами фактов, обязательными полями, допустимыми значениями) и правилами валидации Study KB.

---

### 2.3 Модуль 3: Интеллектуальное создание документов (Co-pilot)

**USR-301:** Пользователь должен иметь возможность создавать новый документ на основе предустановленных шаблонов, привязанных к конкретному Study.
<ins>**USR-301.1 (Добавлено):** Администратор должен иметь возможность загружать и управлять структурными шаблонами документов (например, в формате DOCX с плейсхолдерами).</ins>
<ins>**USR-301.2 (Добавлено):** Для каждого шаблона Администратор должен иметь возможность настраивать связанные с ним артефакты: ‘контракты секций’, правила глоссария и правила QC Gate. Все изменения в этих конфигурациях должны быть версионируемыми и аудируемыми.</ins>

**USR-302:** При написании текста в редакторе система (Co-pilot) должна проактивно предлагать автодополнение проверяемыми данными из Study KB (например, дозировки, определения популяций, N, окна визитов), с отображением источника.

**USR-303:** Пользователь должен иметь возможность дать Co-pilot команду на генерацию чернового варианта текстового раздела на основе указанных источников и/или выбранного “контракта секции”.

**USR-304:** Весь сгенерированный или вставленный с помощью Co-pilot контент должен содержать кликабельные ссылки для прослеживаемости до источника (Anchors) и указывать используемую версию документа-источника.

**USR-305:** Система должна блокировать публикацию/вставку “готового” (publishable) сгенерированного контента, если он не прошел внутреннюю проверку качества (QC Gate), и информировать пользователя о причинах блокировки.

**USR-306:** Пользователь должен иметь возможность выбирать “контракт секции” (набор правил для секции), который определяет:
*   допустимые источники (какие типы документов и версии можно использовать),
*   обязательные факты (что должно быть присутствовать),
*   требования к цитированию,
*   правила для числовых значений и терминологии.

**USR-307:** Система должна поддерживать глоссарий/терминологические правила (например, определения AE/SAE, названия endpoints) и применять их при генерации и проверках, а также подсвечивать нарушения.

**USR-308:** Co-pilot должен уметь показывать список **missing evidence / TBD** по секции и давать пользователю переход к нужным источникам для устранения недостатка доказательств.

---

### 2.4 Модуль 4: Контроль качества и несоответствий (Audit & QC)

**USR-401:** Система должна автоматически проводить сверку данных между документами одного исследования на основе Study KB для заранее определенного набора правил и типов документов (конфигурируемо).

**USR-402:** Пользователь должен иметь доступ к дашборду несоответствий, где отображаются найденные конфликты с указанием их критичности, статуса, владельца и затронутых документов/секций.

**USR-403:** При выборе конфликта пользователь должен видеть сравнительное представление (side-by-side view) противоречащих фрагментов-источников (Anchors) с указанием версий документов.

**USR-404:** Пользователь должен иметь возможность генерировать отчеты о несоответствиях в формате **PDF** или **XLSX**.

**USR-405:** Пользователь должен иметь возможность управлять жизненным циклом несоответствия: назначать владельца, изменять статус (например: **Open / Investigating / Resolved / Accepted risk**), добавлять комментарии и обоснование решения.

**USR-406:** При блокировке QC Gate система должна показывать объяснимый отчёт: тип ошибки (числа/единицы/терминология/версия/цитата), затронутый фрагмент, ссылки на evidence и рекомендуемое действие.

**USR-407:** Пользователь должен иметь возможность формировать “Traceability report” для выбранного документа/секции: утверждение → факт (Study KB) → evidence anchors → документ/версия.

**USR-408:** Система должна поддерживать механизм исключений/подавления (suppress) для ложноположительных конфликтов с обязательным обоснованием и аудитом, включая срок действия (опционально).

**USR-409:** Семантические проверки (triage) должны маркироваться как “кандидаты/подозрения” с отображением evidence-пар и уровнем уверенности, а не как финальный вердикт без возможности проверки.

---

### 2.5 Модуль 5: Управление изменениями (Change Management)

**USR-501:** При загрузке новой версии документа-источника система должна автоматически проводить анализ влияния (Impact Analysis) на связанные документы/секции в рамках Study.

**USR-502:** Пользователь должен получать уведомление и доступ к отчету о влиянии, где перечислены документы и секции, затронутые изменением, с указанием причины (какие факты/anchors изменились и почему секция зависит от них).

**USR-503:** Для каждой затронутой секции система должна предлагать варианты обновления:
*   автоматический патч (для данных, вставленных как факты),
*   регенерация/черновик для нарратива (для текстовых блоков),
*   либо ручной режим.

**USR-504:** Пользователь должен иметь возможность просмотреть предложенные изменения в режиме сравнения (redline/diff) перед их принятием.

**USR-505:** Пользователь должен иметь возможность принять/отклонить предложенное обновление с обязательным комментарием; решение должно фиксироваться в audit trail.

**USR-506:** Система должна сохранять историю impact-отчетов и решений пользователя для последующего аудита.

---

### 2.6 Общие и нефункциональные требования

**USR-601 (Интерфейс):** Пользовательский интерфейс должен быть интуитивно понятным и требовать минимального обучения для основных ролей; ключевые действия (загрузка, просмотр, генерация секции, просмотр конфликтов, redline) должны быть доступны из основных экранов без сложной навигации.

**USR-602 (Производительность):**
*   автодополнение/подсказки Co-pilot: целевое время отклика **≤ 2 секунд** при нормальной нагрузке;
*   обработка документа (ориентиры, подлежащие уточнению при пилотировании):
    *   **DOCX / digital PDF до 300 страниц:** целевое время **≤ 10 минут**,
    *   **scanned PDF до 300 страниц:** целевое время **≤ 20 минут** (или пометка о необходимости увеличенного времени/ручного review при низком качестве).
    Фактические SLA должны быть уточнены на основе типовых данных заказчика.

**USR-603 (Безопасность):** Система должна поддерживать ролевую модель доступа (RBAC) и разграничение прав на уровне Study/документов/функций (просмотр, редактирование, утверждение, администрирование).

**USR-604 (Аудит):** Все действия пользователей и системы, влияющие на данные (загрузка, изменение статуса, генерация, принятие патчей, разрешение конфликтов, изменение правил/шаблонов) должны записываться в неизменяемый audit trail с указанием “кто/что/когда/старое→новое”.

**USR-605 (Надежность):** Система должна обеспечивать резервное копирование и восстановление (backup/restore) и иметь определенные параметры доступности (availability) и восстановления (RPO/RTO), согласуемые с заказчиком.

**USR-606 (Наблюдаемость):** Система должна предоставлять администраторам доступ к журналам ошибок и системным событиям (в рамках прав доступа), достаточным для расследования инцидентов и подтверждения корректной работы.

---

### 2.7 Требования соответствия (Compliance)

**USR-701:** Платформа должна поддерживать принципы GxP и предоставлять технические контроли, необходимые для GxP-эксплуатации (включая управление доступом, audit trail, управляемые статусы и контролируемую конфигурацию). Функциональность **электронной подписи (Part 11 e-sign)** исключена из области применения v1.x и может быть добавлена в будущих версиях.

**USR-702:** Система должна иметь валидационный пакет документов (или шаблоны/материалы для формирования пакета) и поддерживать процедуры валидации на стороне клиента (например, через набор тест-кейсов и трассируемость требований).

**USR-703:** Система должна обеспечивать соблюдение политик конфиденциальности данных (например, GDPR) при работе с документами, содержащими персональные данные, включая разграничение доступа и управление хранением/удалением данных в рамках согласованных политик.

**USR-704 (Governance):** Система должна обеспечивать контроль изменений конфигурации (шаблоны, правила валидации, контракты секций, версии моделей/промптов при наличии) с версионированием и аудитом изменений.

<ins>**USR-705 (Добавлено):** Система должна предоставлять ‘режим валидации’ (Validation Mode), в котором пользователь (валидатор) может выполнять предопределенные тест-кейсы (‘golden test cases’). Система должна автоматически генерировать отчет о выполнении теста, сравнивая фактический результат (например, сгенерированную секцию) с ожидаемым эталоном и предоставляя вердикт Pass/Fail.</ins>

---

## 3. Глоссарий

**Anchor (Якорь):** Уникальный устойчивый идентификатор атомарного элемента в документе-источнике (например, абзаца, ячейки таблицы, сноски), обеспечивающий точную ссылку на первоисточник с учетом версии документа.

**Study KB (База знаний исследования / Fact Store):** Централизованное хранилище канонических структурированных фактов исследования, где каждый факт связан с evidence anchors и имеет статус валидации.

**Narrative Index:** Векторный индекс текстовых контекстов (чанков) для семантического поиска и поддержки генерации нарратива.

**Co-pilot (Ассистент):** Интерактивный помощник в редакторе, который помогает пользователю с созданием, подтверждением и обновлением контента в рамках заданных источников и правил.

**QC Gate (Контроль качества):** Автоматизированный процесс проверки контента (включая числа, версии, терминологию и подтверждение утверждений evidence) перед публикацией/принятием.

**Impact Analysis:** Анализ влияния изменений новой версии источника на факты и связанные документы/секции, включая причину зависимости и предлагаемые действия.